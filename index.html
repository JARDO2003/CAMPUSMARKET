<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketPlace - Votre marketplace en ligne</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B35;
            --primary-dark: #E55A2B;
            --secondary: #004E89;
            --accent: #FFD23F;
            --dark: #1A1A2E;
            --light: #F8F9FA;
            --success: #06D6A0;
            --danger: #EF476F;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        /* Header */
        header {
            background: white;
            box-shadow: 0 4px 20px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .header-top {
            background: var(--secondary);
            color: white;
            padding: 10px 0;
            font-size: 14px;
        }

        .header-top .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-main {
            padding: 20px 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 30px;
        }

        .logo {
            font-family: 'Syne', sans-serif;
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo::before {
            content: "üõçÔ∏è";
            font-size: 36px;
        }

        .search-bar {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
        }

        .search-bar button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-bar button:hover {
            background: var(--primary-dark);
        }

        .nav-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-btn {
            background: none;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .nav-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .cart-btn {
            position: relative;
            background: var(--accent);
            color: var(--dark);
            border: none;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Categories */
        .categories {
            background: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .category-list {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .category-item {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            font-weight: 600;
        }

        .category-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .category-item.active {
            background: var(--secondary);
        }

        /* Hero Banner */
        .hero {
            background: linear-gradient(135deg, var(--secondary), #003366);
            color: white;
            padding: 60px 0;
            margin: 30px 0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .hero::before {
            content: "";
            position: absolute;
            width: 500px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            top: -250px;
            right: -150px;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-family: 'Syne', sans-serif;
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 20px;
            margin-bottom: 30px;
        }

        .hero-btn {
            background: var(--accent);
            color: var(--dark);
            padding: 15px 40px;
            border-radius: 30px;
            border: none;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hero-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 210, 63, 0.4);
        }

        /* Products Grid */
        .products-section {
            padding: 40px 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-family: 'Syne', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 20px var(--shadow);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--success);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .product-info {
            padding: 20px;
        }

        .product-category {
            color: var(--primary);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .product-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .product-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            gap: 10px;
        }

        .product-price {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
        }

        .add-to-cart {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .add-to-cart:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 60px 0 20px;
            margin-top: 80px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            font-family: 'Syne', sans-serif;
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 60px 20px;
        }

        .spinner {
            border: 4px solid rgba(255, 107, 53, 0.1);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-state h2 {
            font-family: 'Syne', sans-serif;
            font-size: 32px;
            color: var(--dark);
            margin-bottom: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-wrapper {
                flex-direction: column;
                gap: 15px;
            }

            .search-bar {
                max-width: 100%;
            }

            .hero h1 {
                font-size: 32px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
            }
        }

        /* Cart Modal */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            animation: fadeIn 0.3s ease-out;
        }

        .cart-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-content {
            background: white;
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            max-height: 85vh;
            overflow: hidden;
            animation: slideUp 0.4s ease-out;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .cart-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h2 {
            font-family: 'Syne', sans-serif;
            font-size: 28px;
            font-weight: 800;
        }

        .close-cart {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-cart:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .cart-body {
            padding: 30px;
            max-height: 50vh;
            overflow-y: auto;
        }

        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .cart-empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: var(--light);
            border-radius: 15px;
            margin-bottom: 15px;
            position: relative;
            transition: all 0.3s;
        }

        .cart-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 700;
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .cart-item-category {
            font-size: 12px;
            color: var(--primary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .cart-item-price {
            font-size: 18px;
            font-weight: 800;
            color: var(--primary);
        }

        .cart-item-original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
            margin-right: 8px;
        }

        .cart-item-badge {
            background: var(--danger);
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            margin-left: 5px;
        }

        .remove-item {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--danger);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-item:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(239, 71, 111, 0.4);
        }

        .cart-footer {
            padding: 25px 30px;
            background: var(--light);
            border-top: 2px solid #e0e0e0;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px dashed #ccc;
        }

        .cart-total-label {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .cart-total-amount {
            font-family: 'Syne', sans-serif;
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
        }

        .cart-actions {
            display: flex;
            gap: 15px;
        }

        .cart-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .cart-btn-primary {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }

        .cart-btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        .cart-btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .cart-btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 10001;
            animation: slideInRight 0.4s ease-out;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.show {
            display: flex;
        }

        .toast-icon {
            font-size: 32px;
        }

        .toast-message {
            flex: 1;
        }

        .toast-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .toast-text {
            font-size: 14px;
            color: #666;
        }

        @media (max-width: 768px) {
            .cart-content {
                width: 95%;
                max-height: 90vh;
            }

            .cart-actions {
                flex-direction: column;
            }

            .toast {
                bottom: 20px;
                right: 20px;
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-top">
            <div class="container">
                <div>üìç Livraison disponible en C√¥te d'Ivoire</div>
                <div>üéÅ Livraison gratuite √† partir de 50 000 FCFA</div>
            </div>
        </div>
        <div class="header-main">
            <div class="container">
                <div class="nav-wrapper">
                    <a href="index.html" class="logo">MarketPlace</a>
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Rechercher des produits...">
                        <button onclick="searchProducts()">üîç</button>
                    </div>
                    <div class="nav-actions">
                        <a href="fournisseur.html" class="nav-btn">Espace Vendeur</a>
                        <button class="nav-btn cart-btn" onclick="viewCart()">
                            üõí Panier
                            <span class="cart-count" id="cartCount">0</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Categories -->
    <section class="categories">
        <div class="container">
            <div class="category-list" id="categoryList">
                <div class="category-item active" onclick="filterByCategory('all')">Tous</div>
                <div class="category-item" onclick="filterByCategory('√âlectronique')">üì± √âlectronique</div>
                <div class="category-item" onclick="filterByCategory('Mode')">üëî Mode</div>
                <div class="category-item" onclick="filterByCategory('Maison')">üè† Maison</div>
                <div class="category-item" onclick="filterByCategory('Beaut√©')">üíÑ Beaut√©</div>
                <div class="category-item" onclick="filterByCategory('Sport')">‚öΩ Sport</div>
                <div class="category-item" onclick="filterByCategory('Alimentation')">üçé Alimentation</div>
                <div class="category-item" onclick="filterByCategory('Livres')">üìö Livres</div>
            </div>
        </div>
    </section>

    <!-- Hero Banner -->
    <div class="container">
        <section class="hero">
            <div class="hero-content">
                <h1>D√©couvrez des milliers de produits</h1>
                <p>Les meilleures offres de vendeurs locaux et internationaux</p>
                <button class="hero-btn" onclick="scrollToProducts()">Commencer mes achats</button>
            </div>
        </section>
    </div>

    <!-- Products Section -->
    <section class="products-section" id="productsSection">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Produits Populaires</h2>
            </div>
            <div class="products-grid" id="productsGrid">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Chargement des produits...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <div class="cart-header">
                <h2>üõí Mon Panier</h2>
                <button class="close-cart" onclick="closeCart()">‚úï</button>
            </div>
            <div class="cart-body" id="cartBody">
                <!-- Cart items will be inserted here -->
            </div>
            <div class="cart-footer" id="cartFooter">
                <!-- Cart total and actions will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon">‚úÖ</div>
        <div class="toast-message">
            <div class="toast-title" id="toastTitle">Produit ajout√©</div>
            <div class="toast-text" id="toastText">Le produit a √©t√© ajout√© √† votre panier</div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>√Ä propos</h3>
                    <ul>
                        <li><a href="#">Qui sommes-nous</a></li>
                        <li><a href="#">Carri√®res</a></li>
                        <li><a href="#">Presse</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Centre d'aide</a></li>
                        <li><a href="#">Retours</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Vendeurs</h3>
                    <ul>
                        <li><a href="fournisseur.html">Devenir vendeur</a></li>
                        <li><a href="#">Guide du vendeur</a></li>
                        <li><a href="#">FAQ Vendeurs</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Suivez-nous</h3>
                    <ul>
                        <li><a href="#">üìò Facebook</a></li>
                        <li><a href="#">üì∑ Instagram</a></li>
                        <li><a href="#">üê¶ Twitter</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 MarketPlace. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs, query, orderBy, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // IMPORTANT: Utilisez vos NOUVELLES cl√©s Firebase (r√©g√©n√©rez-les!)
        const firebaseConfig = {
            apiKey: "AIzaSyCGsq9aN-DKPuzsoBFAgEdfNfrzb-__RRo",
            authDomain: "jardo-26efc.firebaseapp.com",
            databaseURL: "https://jardo-26efc-default-rtdb.firebaseio.com",
            projectId: "jardo-26efc",
            storageBucket: "jardo-26efc.firebasestorage.app",
            messagingSenderId: "1062237964287",
            appId: "1:1062237964287:web:fef58a549cd08d6c0a89ca",
            measurementId: "G-4DB71EL12P"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let allProducts = [];
        let currentCategory = 'all';
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Update cart count
        function updateCartCount() {
            document.getElementById('cartCount').textContent = cart.length;
        }

        // Load products from Firestore
        async function loadProducts() {
            try {
                const productsQuery = query(collection(db, 'products'), orderBy('createdAt', 'desc'));
                const querySnapshot = await getDocs(productsQuery);
                
                allProducts = [];
                querySnapshot.forEach((doc) => {
                    allProducts.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                displayProducts();
            } catch (error) {
                console.error('Erreur lors du chargement des produits:', error);
                document.getElementById('productsGrid').innerHTML = `
                    <div class="empty-state">
                        <h2>Erreur de chargement</h2>
                        <p>Impossible de charger les produits. V√©rifiez votre connexion.</p>
                    </div>
                `;
            }
        }

        // Display products
        function displayProducts() {
            const productsGrid = document.getElementById('productsGrid');
            
            let productsToShow = allProducts;
            
            // Filter by category
            if (currentCategory !== 'all') {
                productsToShow = allProducts.filter(p => p.category === currentCategory);
            }

            if (productsToShow.length === 0) {
                productsGrid.innerHTML = `
                    <div class="empty-state">
                        <h2>Aucun produit trouv√©</h2>
                        <p>Revenez plus tard pour d√©couvrir de nouveaux produits!</p>
                    </div>
                `;
                return;
            }

            productsGrid.innerHTML = productsToShow.map(product => `
                <div class="product-card">
                    ${product.onSale ? '<div class="product-badge" style="background: var(--danger);">PROMO</div>' : 
                      product.isNew ? '<div class="product-badge">NOUVEAU</div>' : ''}
                    <img src="${product.image || 'https://via.placeholder.com/280x250?text=Produit'}" 
                         alt="${product.name}" 
                         class="product-image">
                    <div class="product-info">
                        <div class="product-category">${product.category || 'G√©n√©ral'}</div>
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description || 'Description non disponible'}</p>
                        <div class="product-footer">
                            ${product.onSale && product.discountPrice ? `
                                <div>
                                    <div style="text-decoration: line-through; color: #999; font-size: 16px;">
                                        ${formatPrice(product.price)} FCFA
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">
                                        <span class="product-price" style="font-size: 22px;">
                                            ${formatPrice(product.discountPrice)} FCFA
                                        </span>
                                        <span style="background: var(--danger); color: white; padding: 4px 8px; border-radius: 6px; font-size: 13px; font-weight: 700;">
                                            -${Math.round(((product.price - product.discountPrice) / product.price) * 100)}%
                                        </span>
                                    </div>
                                </div>
                            ` : `
                                <span class="product-price">${formatPrice(product.price)} FCFA</span>
                            `}
                            <button class="add-to-cart" onclick="addToCart('${product.id}')">
                                Ajouter
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Format price
        function formatPrice(price) {
            return new Intl.NumberFormat('fr-FR').format(price);
        }

        // Show toast notification
        function showToast(title, text, icon = '‚úÖ') {
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toastTitle');
            const toastText = document.getElementById('toastText');
            const toastIcon = toast.querySelector('.toast-icon');
            
            toastTitle.textContent = title;
            toastText.textContent = text;
            toastIcon.textContent = icon;
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Add to cart
        window.addToCart = function(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (product) {
                // Use discount price if on sale, otherwise regular price
                const cartProduct = {
                    ...product,
                    cartPrice: product.onSale && product.discountPrice ? product.discountPrice : product.price,
                    cartId: Date.now() + Math.random() // Unique ID for cart item
                };
                cart.push(cartProduct);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                
                // Show toast notification
                const priceToShow = product.onSale && product.discountPrice ? product.discountPrice : product.price;
                showToast(
                    'Ajout√© au panier !',
                    `${product.name} - ${formatPrice(priceToShow)} FCFA`,
                    'üõí'
                );
            }
        };

        // Remove from cart
        window.removeFromCart = function(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCart();
            
            if (cart.length === 0) {
                closeCart();
            }
        };

        // Clear cart
        window.clearCart = function() {
            if (confirm('Voulez-vous vraiment vider votre panier ?')) {
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                closeCart();
            }
        };

        // Render cart
        function renderCart() {
            const cartBody = document.getElementById('cartBody');
            const cartFooter = document.getElementById('cartFooter');
            
            if (cart.length === 0) {
                cartBody.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">üõí</div>
                        <h3>Votre panier est vide</h3>
                        <p>Ajoutez des produits pour commencer vos achats</p>
                    </div>
                `;
                cartFooter.innerHTML = '';
                return;
            }

            // Render items
            cartBody.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-category">${item.category}</div>
                        <div class="cart-item-name">${item.name}</div>
                        <div>
                            ${item.onSale ? `
                                <span class="cart-item-original-price">${formatPrice(item.price)} FCFA</span>
                                <span class="cart-item-badge">-${Math.round(((item.price - item.discountPrice) / item.price) * 100)}%</span>
                            ` : ''}
                        </div>
                        <div class="cart-item-price">${formatPrice(item.cartPrice)} FCFA</div>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.cartId})">
                        üóëÔ∏è
                    </button>
                </div>
            `).join('');

            // Calculate total
            const total = cart.reduce((sum, item) => sum + item.cartPrice, 0);
            const savings = cart.reduce((sum, item) => {
                if (item.onSale && item.discountPrice) {
                    return sum + (item.price - item.discountPrice);
                }
                return sum;
            }, 0);

            // Render footer
            cartFooter.innerHTML = `
                <div class="cart-total">
                    <div>
                        <div class="cart-total-label">Total (${cart.length} article${cart.length > 1 ? 's' : ''})</div>
                        ${savings > 0 ? `<div style="font-size: 14px; color: var(--success); margin-top: 5px;">
                            üí∞ Vous √©conomisez ${formatPrice(savings)} FCFA
                        </div>` : ''}
                    </div>
                    <div class="cart-total-amount">${formatPrice(total)} FCFA</div>
                </div>
                <div class="cart-actions">
                    <button class="cart-btn cart-btn-secondary" onclick="clearCart()">
                        üóëÔ∏è Vider le panier
                    </button>
                    <button class="cart-btn cart-btn-primary" onclick="orderViaWhatsApp()">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        Commander sur WhatsApp
                    </button>
                </div>
            `;
        }

        // Open cart modal
        window.viewCart = function() {
            renderCart();
            document.getElementById('cartModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        };

        // Close cart modal
        window.closeCart = function() {
            document.getElementById('cartModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        };

        // Order via WhatsApp
        window.orderViaWhatsApp = function() {
            if (cart.length === 0) return;

            const phoneNumber = '2250153707186'; // Num√©ro WhatsApp du fournisseur
            const total = cart.reduce((sum, item) => sum + item.cartPrice, 0);
            
            // Construire le message de commande
            let message = 'üõí *NOUVELLE COMMANDE*\n\n';
            message += 'üì¶ *Produits command√©s :*\n\n';
            
            cart.forEach((item, index) => {
                message += `${index + 1}. *${item.name}*\n`;
                message += `   Cat√©gorie: ${item.category}\n`;
                message += `   Prix: ${formatPrice(item.cartPrice)} FCFA`;
                if (item.onSale) {
                    message += ` üè∑Ô∏è (Prix normal: ${formatPrice(item.price)} FCFA)`;
                }
                message += '\n\n';
            });
            
            message += `üí∞ *TOTAL: ${formatPrice(total)} FCFA*\n`;
            message += `üìä Nombre d'articles: ${cart.length}\n\n`;
            message += 'üìç _Merci de me confirmer la disponibilit√© et les d√©tails de livraison._';

            // Encoder le message pour l'URL
            const encodedMessage = encodeURIComponent(message);
            
            // Cr√©er le lien WhatsApp
            const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            // Ouvrir WhatsApp
            window.open(whatsappURL, '_blank');
            
            // Optionnel: Vider le panier apr√®s la commande
            // cart = [];
            // localStorage.setItem('cart', JSON.stringify(cart));
            // updateCartCount();
            // closeCart();
        };

        // Close modal when clicking outside
        document.getElementById('cartModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCart();
            }
        });

        // Filter by category
        window.filterByCategory = function(category) {
            currentCategory = category;
            displayProducts();
            
            // Update active category
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        };

        // Search products
        window.searchProducts = function() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const productsGrid = document.getElementById('productsGrid');
            
            const filtered = allProducts.filter(p => 
                p.name.toLowerCase().includes(searchTerm) ||
                (p.description && p.description.toLowerCase().includes(searchTerm))
            );

            if (filtered.length === 0) {
                productsGrid.innerHTML = `
                    <div class="empty-state">
                        <h2>Aucun r√©sultat pour "${searchTerm}"</h2>
                        <p>Essayez d'autres mots-cl√©s</p>
                    </div>
                `;
            } else {
                productsGrid.innerHTML = filtered.map(product => `
                    <div class="product-card">
                        ${product.onSale ? '<div class="product-badge" style="background: var(--danger);">PROMO</div>' : 
                          product.isNew ? '<div class="product-badge">NOUVEAU</div>' : ''}
                        <img src="${product.image || 'https://via.placeholder.com/280x250?text=Produit'}" 
                             alt="${product.name}" 
                             class="product-image">
                        <div class="product-info">
                            <div class="product-category">${product.category || 'G√©n√©ral'}</div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description || ''}</p>
                            <div class="product-footer">
                                ${product.onSale && product.discountPrice ? `
                                    <div>
                                        <div style="text-decoration: line-through; color: #999; font-size: 16px;">
                                            ${formatPrice(product.price)} FCFA
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 8px; margin-top: 4px;">
                                            <span class="product-price" style="font-size: 22px;">
                                                ${formatPrice(product.discountPrice)} FCFA
                                            </span>
                                            <span style="background: var(--danger); color: white; padding: 4px 8px; border-radius: 6px; font-size: 13px; font-weight: 700;">
                                                -${Math.round(((product.price - product.discountPrice) / product.price) * 100)}%
                                            </span>
                                        </div>
                                    </div>
                                ` : `
                                    <span class="product-price">${formatPrice(product.price)} FCFA</span>
                                `}
                                <button class="add-to-cart" onclick="addToCart('${product.id}')">
                                    Ajouter
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        };

        // Scroll to products
        window.scrollToProducts = function() {
            document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' });
        };

        // Initialize
        updateCartCount();
        loadProducts();
    </script>
</body>
</html>